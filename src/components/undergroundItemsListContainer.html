<script type="text/html" id="UndergroundItemFilterTemplate">
    <div class="row no-gutters" style="align-items: center">
        <div class="input-group">
            <select
                class="custom-select"
                onchange="Settings.setSettingByName(this.name, this.value)"
                data-bind="foreach: ['All', ...Object.keys(UndergroundItemValueType).filter(i=>isNaN(i))], attr: {name}"
            >
                <option data-bind="text: GameConstants.camelCaseToString($data), value: $data, attr:{ selected: $parent.observableValue() == $data }"></option>
            </select>
        </div>
    </div>
</script>
<div id="undergroundItemsListContainer" class="card sortable border-secondary mb-3" data-bind="visible: player.highestRegion() && !(Settings.getSetting('hideUndergroundItemsListModules').observableValue())">
    <div class="card-header p-0" data-toggle="collapse" href="#undergroundItemsListBody">
        <span>Underground Items</span>
    </div>
    <div id="undergroundItemsListBody" class="card-body p-0 show table-responsive">
        <div data-bind="template: { name: 'UndergroundItemFilterTemplate', data: Settings.getSetting('undergroundItemFilter')}"></div>

        <table
            id="undergroundItemsList"
            class="table table-striped table-hover table-sm m-0"
        >
            <thead>
                <tr>
                    <td></td>
                    <td>
                        <div>
                            <div class="undergroundItemName">Name</div>
                            <div class="undergroundItemQuantity">Quantity</div>
                        </div>
                    </td>
                </tr>
            </thead>
            <tbody data-bind="foreach: Settings.getSetting('undergroundItemFilter').observableValue() === 'All' ? player.mineInventory() : player.mineInventory().filter(i=>i.valueType === UndergroundItemValueType[Settings.getSetting('undergroundItemFilter').observableValue()])">
                <tr>
                    <td>
                        <img src="" data-bind="attr: { src: UndergroundItems.getById(id).image }" width="26px">
                    </td>
                    <td>
                        <div>
                            <div class="undergroundItemName" data-bind="text: name"></div>
                            <div class="undergroundItemQuantity" data-bind="text: amount()"></div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
