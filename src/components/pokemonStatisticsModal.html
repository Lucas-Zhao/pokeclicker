<div class="modal noselect fade" id="pokemonStatisticsModal" tabindex="-1" role="dialog" aria-labelledby="pokemonStatisticsModal">
  <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal modal-sm" role="document">
    <div class="modal-content" data-bind="with: App.game.statistics.selectedPokemonID()">
      <div class="modal-header bg-dark text-light" style='justify-content: space-around;'>
        <h5 class="modal-title text-muted"
          data-bind="text: `#${pokemonMap[$data].id <= 0 ? '???' : Math.floor(pokemonMap[$data].id).toString().padStart(3,0)}&nbsp;&nbsp;`">
        </h5>
        <h5 class="modal-title text-light" data-bind="text: PokemonHelper.displayName(pokemonMap[$data].name)">Pokémon Statistics</h5>&nbsp;
        <h5 class="modal-title text-light ml-1" data-bind="if: App.game.party.getPokemon(pokemonMap[$data].id)">
          <img width="18px" src=""
            data-bind="attr: { src: `assets/images/pokeball/Pokeball${App.game.party.alreadyCaughtPokemon(pokemonMap[$data].id, true) ? '-shiny' : ''}.svg` }" />
        </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body p-0 pb-1">
        <div class="row m-0 mt-1">
          <div class="col">
            <img data-bind="attr:{ src: PokemonHelper.getImage(pokemonMap[$data].id) }" src=""/>
            <div class="position-absolute" style="top: 0px; right: 15px;"
              data-bind="if: App.game.party.getPokemon(pokemonMap[$data].id)?.pokerus">
              <img width="40px" src=""
                data-bind="attr: { src: `assets/images/breeding/pokerus/${GameConstants.Pokerus[App.game.party.getPokemon(pokemonMap[$data].id)?.pokerus]}.png`}" />
            </div>
          </div>
        </div>
        <!-- ko let: { partyPokemon: App.game.party.getPokemon($data) } -->
        <div class="row m-0 mt-2">
          <div class="col-12 col-lg-6">
            <table class="table table-striped table-hover table-bordered table-sm m-0 mb-2">
              <thead>
                <tr class="bg-secondary">
                  <th colspan="2">Pokémon Stats</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="text-left">Type</td>
                  <td class="text-left tight">
                    <span class="badge text-light px-1" data-bind="visible: pokemonMap[$data].type[0] >= 0,
                                style: { 'background-color': TypeColor[pokemonMap[$data].type[0]] }">
                      <small><strong
                          data-bind="text: PokemonType[pokemonMap[$data].type[0]].toUpperCase()"></strong></small>
                    </span>
                    <span class="badge text-light px-1" data-bind="if: pokemonMap[$data].type[1] >= 0,
                                style: { 'background-color': TypeColor[pokemonMap[$data].type[1]] }">
                      <small><strong
                          data-bind="text: PokemonType[pokemonMap[$data].type[1]].toUpperCase()"></strong></small>
                    </span>
                  </td>
                </tr>
                <tr>
                  <td class="text-left">Base Attack</td>
                  <td class="text-left tight"><code
                      data-bind="text: pokemonMap[$data].attack.toLocaleString('en-US')">-</code></td>
                </tr>
                <tr>
                  <td class="text-left">Current Attack</td>
                  <td class="text-left tight"><code
                      data-bind="text: (partyPokemon?.attack ?? 0).toLocaleString('en-US')">-</code>
                  </td>
                </tr>
                <!-- ko if: partyPokemon && partyPokemon.level !== 100 -->
                <tr>
                  <td class="text-left">Attack at level 100</td>
                  <td class="text-left tight"><code
                      data-bind="text: partyPokemon.calculateAttack(true).toLocaleString('en-US')">-</code>
                  </td>
                </tr>
                <!-- /ko -->
                <!-- ko if: partyPokemon?.pokerus -->
                <tr>
                  <td class="text-left">EVs</td>
                  <td class="text-left tight">
                    <code>
                      <span data-bind="text: partyPokemon.calculateEVs().toLocaleString('en-US')">-</span>
                    </code>
                  </td>
                </tr>
                <tr>
                  <td class="text-left">EV bonus</td>
                  <td class="text-left tight"><code
                      data-bind="text: '×' + partyPokemon.calculateEVAttackBonus().toLocaleString('en-US')">-</code>
                  </td>
                </tr>
                <!-- /ko -->
                <tr>
                  <td class="text-left">Catch Rate</td>
                  <td class="text-left tight"><code
                      data-bind="text: PokemonFactory.catchRateHelper(pokemonMap[$data].catchRate, true) + '%'">-</code>
                  </td>
                </tr>
                <tr>
                  <td class="text-left">Hatch Steps</td>
                  <td class="text-left tight"><code
                      data-bind="text: partyPokemon?.getEggSteps().toLocaleString('en-US') || 'Unknown'">-</code>
                  </td>
                </tr>
                <!-- ko if: partyPokemon -->
                <tr>
                  <td class="text-left">Breeding Efficiency</td>
                  <td class="text-left tight"><code
                      data-bind="text: SortOptionConfigs[SortOptions.breedingEfficiency].getValue(partyPokemon).toLocaleString('en-US', { maximumFractionDigits: 3 })"></code>
                  </td>
                </tr>
                <!-- /ko -->
                <!-- ko if: BagHandler.displayName(pokemonMap[$data].heldItem) -->
                <tr>
                  <td class="text-left align-middle">Rare Hold Item</td>
                  <td class="text-left tight text-wrap"><code
                      data-bind="text: BagHandler.displayName(pokemonMap[$data].heldItem)"></code></td>
                </tr>
                <!-- /ko -->
                <tr>
                  <td class="text-left align-middle">Gender Ratio</td>
                  <td class="text-justify tight">
                    <!-- ko if: pokemonMap[$data].gender.type === GameConstants.Genders.Genderless -->
                    <code>Genderless</code>
                    <!-- /ko -->
                    <!-- ko if: pokemonMap[$data].gender.type != GameConstants.Genders.Genderless -->
                    <code
                      data-bind="text: '♂: ' + PokedexHelper.getGenderRatioData(pokemonMap[$data]).male + '%'"></code>
                    <br />
                    <code
                      data-bind="text: '♀: ' + PokedexHelper.getGenderRatioData(pokemonMap[$data]).female + '%'"></code>
                    <!-- /ko -->
                  </td>
                </tr>
                <!-- ko if: partyPokemon -->
                <tr>
                  <td class="text-left align-middle">Held Item</td>
                  <td class="text-left tight text-wrap">
                    <div class="d-flex align-items-center">
                        <div class="flex-grow-1">
                            <code data-bind="text: partyPokemon.heldItem()?.displayName || '-'"></code>
                        </div>
                        <div class="dropdown dropright ml-1">
                            <button class="btn btn-primary dropdown-toggle px-1 py-0" data-toggle="dropdown"></button>
                            <div class="dropdown-menu border-primary" style="overflow: auto; width: 270px; max-height: 500px;">
                                <!-- ko if: partyPokemon.heldItem() -->
                                <div class="dropdown-item d-flex align-items-center small clickable px-1"
                                    data-bind="click: () => partyPokemon.giveHeldItem(partyPokemon.heldItem())">
                                    <img src="" data-bind="attr: { src: partyPokemon.heldItem().image }" width="32" height="32" />
                                    <strong class="flex-grow-1 ml-2 text-danger">
                                        Remove <span data-bind="text: partyPokemon.heldItem().displayName"></strong>
                                    </strong>
                                </div>
                                <div class="dropdown-divider"></div>
                                <!-- /ko -->
                                <!-- ko foreach: Object.values(ItemList)
                                    .filter((item) => item instanceof HeldItem && item.isUnlocked() && item.canUse(partyPokemon) && partyPokemon.heldItem() !== item)
                                    .sort((a, b) => a.displayName.localeCompare(b.displayName))
                                -->
                                <div class="dropdown-item d-flex align-items-center small clickable px-1"
                                    data-bind="click: () => partyPokemon.giveHeldItem($data)">
                                    <img src="" data-bind="attr: { src: $data.image }" width="32" height="32" />
                                    <div class="flex-grow-1 ml-2">
                                        <div>
                                            <strong data-bind="text: $data.displayName"></strong>
                                            <small data-bind="text: `[${player.itemList[$data.name]().toLocaleString('en-US')}]`"></small>
                                        </div>
                                        <div class="small" data-bind="text: $data.description"></div>
                                    </div>
                                </div>
                                <!-- /ko -->
                            </div>
                        </div>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td colspan="2" class="text-left tight">
                    <input type="text" class="form-control" placeholder="Nickname"
                      data-bind="value: partyPokemon.nickname" />
                  </td>
                </tr>
                <!-- ko if: pokemonMap[$data].gender.visualDifference -->
                <tr>
                  <td class="text-left align-middle">Display Gender</td>
                  <td class="text-left tight">
                    <label class="form-check-label toggler-wrapper style-1 gender-toggle float-left">
                      <input class="form-check-input" type="checkbox" id="" value="false"
                        data-bind="checked: partyPokemon.defaultFemaleSprite">
                      <div class="toggler-slider">
                        <div class="toggler-knob"></div>
                      </div>
                    </label>
                  </td>
                </tr>
                <!-- /ko -->
                <!-- ko if: partyPokemon?.shiny -->
                <tr>
                  <td class="text-left align-middle text-nowrap">Hide Shiny Sprite</td>
                  <td class="text-left tight">
                    <label class="form-check-label toggler-wrapper style-1 float-left">
                      <input class="form-check-input" type="checkbox" id="" value="false"
                        data-bind="checked: partyPokemon.hideShinyImage">
                      <div class="toggler-slider" data-bind="tooltip: {
                        html: true,
                        title: Settings.getSetting('partyHideShinySprites').observableValue() ?
                            `<strong><u>${Settings.getSetting('partyHideShinySprites').displayName}</u></strong> is currently overriding this setting.` : '',
                        trigger: 'hover',
                      }">
                        <div class="toggler-knob"></div>
                      </div>
                    </label>
                  </td>
                </tr>
                <!-- /ko -->
                <!-- ko if: partyPokemon?.shadow == GameConstants.ShadowStatus.Purified -->
                <tr>
                  <td class="text-left align-middle text-nowrap">Show Shadow</td>
                  <td class="text-left tight">
                    <label class="form-check-label toggler-wrapper style-1 float-left">
                      <input class="form-check-input" type="checkbox" id="" value="false"
                        data-bind="checked: partyPokemon.showShadowImage">
                      <div class="toggler-slider">
                        <div class="toggler-knob"></div>
                      </div>
                    </label>
                  </td>
                </tr>
                <!-- /ko -->
                <!-- /ko -->
              </tbody>
            </table>
          </div>
          <div class="col col-lg-6">
            <table class="table table-striped table-hover table-bordered table-sm m-0 mb-2">
              <thead>
                <tr class="bg-secondary">
                  <th colspan="2">Statistics</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="text-left align-middle">Encountered</td>
                  <td class="text-left align-middle tight position-relative">
                    <code
                      data-bind="text: App.game.statistics.pokemonEncountered[$data]().toLocaleString('en-US')">-</code>
                    <!-- Gender Statistics -->
                    <!-- ko if: pokemonMap[$data].gender.type == GameConstants.Genders.MaleFemale && pokemonMap[$data].gender.femaleRatio != 0 && pokemonMap[$data].gender.femaleRatio != 1 -->
                    <knockout data-bind="template: {
                                  name: 'pokemonGenderStatisticTemplate',
                                  data: {
                                      'maleStat': App.game.statistics.malePokemonEncountered[$data](),
                                      'femaleStat': App.game.statistics.femalePokemonEncountered[$data](),
                                  }
                              }">Pokémon gender statistic</knockout>
                    <!-- /ko -->
                  </td>
                </tr>
                <tr>
                  <td class="text-left align-middle">Defeated</td>
                  <td class="text-left align-middle tight position-relative">
                    <code
                      data-bind="text: App.game.statistics.pokemonDefeated[$data]().toLocaleString('en-US')">-</code>
                    <!-- Gender Statistics -->
                    <!-- ko if: pokemonMap[$data].gender.type == GameConstants.Genders.MaleFemale && pokemonMap[$data].gender.femaleRatio != 0 && pokemonMap[$data].gender.femaleRatio != 1 -->
                    <knockout data-bind="template: {
                                  name: 'pokemonGenderStatisticTemplate',
                                  data: {
                                      'maleStat': App.game.statistics.malePokemonDefeated[$data](),
                                      'femaleStat': App.game.statistics.femalePokemonDefeated[$data](),
                                  }
                              }">Pokémon gender statistic</knockout>
                    <!-- /ko -->
                  </td>
                </tr>
                <tr>
                  <td class="text-left align-middle">Captured</td>
                  <td class="text-left align-middle tight position-relative">
                    <code
                      data-bind="text: App.game.statistics.pokemonCaptured[$data]().toLocaleString('en-US')">-</code>
                    <!-- Gender Statistics -->
                    <!-- ko if: pokemonMap[$data].gender.type == GameConstants.Genders.MaleFemale && pokemonMap[$data].gender.femaleRatio != 0 && pokemonMap[$data].gender.femaleRatio != 1 -->
                    <knockout data-bind="template: {
                                  name: 'pokemonGenderStatisticTemplate',
                                  data: {
                                      'maleStat': App.game.statistics.malePokemonCaptured[$data](),
                                      'femaleStat': App.game.statistics.femalePokemonCaptured[$data](),
                                  }
                              }">Pokémon gender statistic</knockout>
                    <!-- /ko -->
                  </td>
                </tr>
                <tr>
                  <td class="text-left align-middle">Hatched</td>
                  <td class="text-left align-middle tight position-relative">
                    <code data-bind="text: App.game.statistics.pokemonHatched[$data]().toLocaleString('en-US')">-</code>
                    <!-- Gender Statistics -->
                    <!-- ko if: pokemonMap[$data].gender.type == GameConstants.Genders.MaleFemale && pokemonMap[$data].gender.femaleRatio != 0 && pokemonMap[$data].gender.femaleRatio != 1 -->
                    <knockout data-bind="template: {
                                  name: 'pokemonGenderStatisticTemplate',
                                  data: {
                                      'maleStat': App.game.statistics.malePokemonHatched[$data](),
                                      'femaleStat': App.game.statistics.femalePokemonHatched[$data](),
                                  }
                              }">Pokémon gender statistic</knockout>
                    <!-- /ko -->
                  </td>
                </tr>
                <tr>
                  <td class="text-left align-middle">Shinies Encountered</td>
                  <td class="text-left align-middle tight position-relative">
                    <code
                      data-bind="text: App.game.statistics.shinyPokemonEncountered[$data]().toLocaleString('en-US')">-</code>
                    <!-- Gender Statistics -->
                    <!-- ko if: pokemonMap[$data].gender.type == GameConstants.Genders.MaleFemale && pokemonMap[$data].gender.femaleRatio != 0 && pokemonMap[$data].gender.femaleRatio != 1 -->
                    <knockout data-bind="template: {
                                  name: 'pokemonGenderStatisticTemplate',
                                  data: {
                                      'maleStat': App.game.statistics.shinyMalePokemonEncountered[$data](),
                                      'femaleStat': App.game.statistics.shinyFemalePokemonEncountered[$data](),
                                  }
                              }">Pokémon gender statistic</knockout>
                    <!-- /ko -->
                  </td>
                </tr>
                <tr>
                  <td class="text-left align-middle">Shinies Defeated</td>
                  <td class="text-left align-middle tight position-relative">
                    <code
                      data-bind="text: App.game.statistics.shinyPokemonDefeated[$data]().toLocaleString('en-US')">-</code>
                    <!-- Gender Statistics -->
                    <!-- ko if: pokemonMap[$data].gender.type == GameConstants.Genders.MaleFemale && pokemonMap[$data].gender.femaleRatio != 0 && pokemonMap[$data].gender.femaleRatio != 1 -->
                    <knockout data-bind="template: {
                                  name: 'pokemonGenderStatisticTemplate',
                                  data: {
                                      'maleStat': App.game.statistics.shinyMalePokemonDefeated[$data](),
                                      'femaleStat': App.game.statistics.shinyFemalePokemonDefeated[$data](),
                                  }
                              }">Pokémon gender statistic</knockout>
                    <!-- /ko -->
                  </td>
                </tr>
                <tr>
                  <td class="text-left align-middle">Shinies Captured</td>
                  <td class="text-left align-middle tight position-relative">
                    <code
                      data-bind="text: App.game.statistics.shinyPokemonCaptured[$data]().toLocaleString('en-US')">-</code>
                    <!-- Gender Statistics -->
                    <!-- ko if: pokemonMap[$data].gender.type == GameConstants.Genders.MaleFemale && pokemonMap[$data].gender.femaleRatio != 0 && pokemonMap[$data].gender.femaleRatio != 1 -->
                    <knockout data-bind="template: {
                                  name: 'pokemonGenderStatisticTemplate',
                                  data: {
                                      'maleStat': App.game.statistics.shinyMalePokemonCaptured[$data](),
                                      'femaleStat': App.game.statistics.shinyFemalePokemonCaptured[$data](),
                                  }
                              }">Pokémon gender statistic</knockout>
                    <!-- /ko -->
                  </td>
                </tr>
                <tr>
                  <td class="text-left align-middle">Shinies Hatched</td>
                  <td class="text-left align-middle tight position-relative">
                    <code
                      data-bind="text: App.game.statistics.shinyPokemonHatched[$data]().toLocaleString('en-US')">-</code>
                    <!-- Gender Statistics -->
                    <!-- ko if: pokemonMap[$data].gender.type == GameConstants.Genders.MaleFemale && pokemonMap[$data].gender.femaleRatio != 0 && pokemonMap[$data].gender.femaleRatio != 1 -->
                    <knockout data-bind="template: {
                                  name: 'pokemonGenderStatisticTemplate',
                                  data: {
                                      'maleStat': App.game.statistics.shinyMalePokemonHatched[$data](),
                                      'femaleStat': App.game.statistics.shinyFemalePokemonHatched[$data](),
                                  }
                              }">Pokémon gender statistic</knockout>
                    <!-- /ko -->
                  </td>
                </tr>
              </tbody>
            </table>

            <!-- ko if: !App.game.challenges.list.disableVitamins.active() && partyPokemon -->
            <table class="table table-striped table-hover table-bordered table-sm m-0 mb-2">
              <thead>
                <tr class="bg-secondary">
                  <th colspan="2">Vitamins</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="text-left">Vitamins Used</td>
                  <td class="text-left tight"><code
                      data-bind="text: partyPokemon.totalVitaminsUsed().toLocaleString('en-US')">-</code>
                  </td>
                </tr>
                <!-- ko foreach: GameHelper.enumNumbers(GameConstants.VitaminType) -->
                <tr>
                  <td class="text-left" data-bind="text: `${GameConstants.VitaminType[$data]}`">X Used</td>
                  <td class="text-left tight"><code
                      data-bind="text: partyPokemon?.vitaminsUsed[$data]().toLocaleString('en-US')">-</code>
                  </td>
                </tr>
                <!-- /ko -->
              </tbody>
            </table>
            <!-- /ko -->
          </div>
        </div>
        <!-- /ko -->
      </div>
    </div>
  </div>
</div>
